#!/bin/sh

#  Thomas
#  Example: time -p ./chaos-scan .010 .350 .01 10000 .000001 10 2>/dev/null | tee /tmp/results
#
#  Lorenz
#  Example: time -p ./chaos-scan 180.70 181.00 .01 10000 .000001 10 2>/dev/null | tee /tmp/results
#
#  Rabinovichâ€“Fabrikant
#  Example: time -p ./chaos-scan .100 .350 .0005 50000 .000000001 10 2>/dev/null | tee /tmp/results
#
#  filter results:
#  sed -n '1~10p' </tmp/results

start=$1
end=$2
step=$3
datalines=$4
separation1=$5
ratio=$6
separation2=$(echo "scale=15; $separation1 / $ratio;" | bc)

x=$start
while [ 1 -eq "$(echo "scale=3; $x < $end" | bc)" ]
do
    echo -n "$x "
#    ./ic $separation1 noplot ./tsm-thomas-static 18 32 10 0.1 $datalines 1 0 0 $x >/dev/null 2>/dev/null
    ./ic $separation1 noplot ./tsm-lorenz-static 18 32 20 .01 $datalines -15.8 -17.48 35.64 10 $x 8 3 >/dev/null 2>/dev/null
#    ./ic $separation1 noplot ./tsm-sprott-minimal-static 18 32 10 .01 $datalines .02 0 0 $x >/dev/null 2>/dev/null
#    ./ic $separation1 noplot ./tsm-halvorsen-static 18 32 10 .01 $datalines 1 0 0 $x >/dev/null 2>/dev/null
#    ./ic $separation1 noplot ./tsm-rf-static 18 32 16 .01 $datalines .05 -.05 .3 $x .1 >/dev/null 2>/dev/null
    cp /tmp/dataA /tmp/dataA1
    cp /tmp/dataB /tmp/dataB1
    cp /tmp/dataC /tmp/dataC1
    cp /tmp/dataD /tmp/dataD1
    cp /tmp/dataE /tmp/dataE1
    cp /tmp/dataF /tmp/dataF1
    cp /tmp/dataG /tmp/dataG1
#    ./ic $separation2 noplot ./tsm-thomas-static 18 32 10 0.1 $datalines 1 0 0 $x >/dev/null 2>/dev/null
    ./ic $separation2 noplot ./tsm-lorenz-static 18 32 20 .01 $datalines -15.8 -17.48 35.64 10 $x 8 3 >/dev/null 2>/dev/null
#    ./ic $separation2 noplot ./tsm-sprott-minimal-static 18 32 10 .01 $datalines .02 0 0 $x >/dev/null 2>/dev/null
#    ./ic $separation2 noplot ./tsm-halvorsen-static 18 32 10 .01 $datalines 1 0 0 $x >/dev/null 2>/dev/null
#    ./ic $separation2 noplot ./tsm-rf-static 18 32 16 .01 $datalines .05 -.05 .3 $x .1 >/dev/null 2>/dev/null
    cp /tmp/dataA /tmp/dataA2
    cp /tmp/dataB /tmp/dataB2
    cp /tmp/dataC /tmp/dataC2
    cp /tmp/dataD /tmp/dataD2
    cp /tmp/dataE /tmp/dataE2
    cp /tmp/dataF /tmp/dataF2
    cp /tmp/dataG /tmp/dataG2
    ./chaos-distance.py $(expr $datalines + 1) $separation1 $separation2
    x=$(echo "scale=3; $x + $step;" | bc)
done

