#!/bin/sh

start=$1
end=$2
step=$3
datalines=$4
separation=$5

run_simulation() {
    separation=$1
    shift
    files=$*
    x=$start
    while [ 1 -eq "$(echo "scale=3; $x < $end" | bc)" ]
    do
        echo -n "$x "
        ./ic $separation noplot ./tsm-rf-static 18 32 16 .01 $datalines .05 -.05 .3 $x .1 >/dev/null 2>/dev/null
    #    ./ic $separation noplot ./tsm-thomas-static 18 32 10 0.1 $datalines 1 0 0 $x >/dev/null 2>/dev/null
    #    ./ic $separation noplot ./tsm-lorenz-static 18 32 10 .01 $datalines -15.8 -17.48 35.64 10 $x 8 3 >/dev/null 2>/dev/null
    #    ./ic $separation noplot ./tsm-sprott-minimal-static 18 32 10 .01 $datalines .02 0 0 $x >/dev/null 2>/dev/null
    #    ./ic $separation noplot ./tsm-halvorsen-static 18 32 10 .01 $datalines 1 0 0 $x >/dev/null 2>/dev/null
        ./chaos-distance.py $files1 $(expr $datalines + 1)
        x=$(echo "scale=3; $x + $step;" | bc)
    done 
}

run_simulation $separation '/tmp/dataA /tmp/dataB /tmp/dataC /tmp/dataD /tmp/dataE /tmp/dataF /tmp/dataG'

separation=$(echo "scale=15; $separation / 1000;" | bc)

run_simulation $separation '/tmp/dataa /tmp/datab /tmp/datac /tmp/datad /tmp/datae /tmp/dataf /tmp/datag'

