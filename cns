#!/bin/sh
#
#  (c) 2018-2022 m4r35n357@gmail.com (Ian Smith), for licencing see the LICENCE file
#

echo "Clean Numerical Simulation: [$0 $*]" >&2

method=$1
threshold=$2
shift 2

. ./cns-functions.sh

case $method in
    'step2') original=$*
             halfstep $original
             $original >$fileB &
             wait;;
    'nosim') ;;  # compare user-supplied data or replot existing
          *) echo "CNS: Bad Method, should be 'step2' or 'nosim'";
             exit 1;;
esac

./divergence $fileA $fileB $threshold

 /usr/bin/gnuplot -p << EOF
set key horizontal left
plot '$fileA' using 4:1 t 'x' w l lc 'dark-red', '' u 4:2 t 'y' w l lc 'dark-red', '' u 4:3 t 'z' w l lc 'dark-red', \
     '$fileB' using 4:1 t 'x' w l lc 'forest-green', '' u 4:2 t 'y' w l lc 'dark-yellow', '' u 4:3 t 'z' w l lc 'dark-turquoise'
EOF
