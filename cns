#!/bin/sh
#
#  (c) 2018-2022 m4r35n357@gmail.com (Ian Smith), for licencing see the LICENCE file
#

echo "Clean Numerical Simulation: [$0 $*]" >&2

method=$1
threshold=$2
shift 2

. ./cns-functions.sh

case $method in
    'step2') original=$*
             halfstep $original
             $original >$fileB &
             wait;;
    'nosim') ;;  # compare user-supplied data or replot existing
          *) echo "CNS: Bad Method"; exit 1;;
esac

./divergence $fileA $fileB $threshold

 /usr/bin/gnuplot -p << EOF
set key horizontal left
plot '/tmp/$USER/dataA' using 4:1 t 'xA' with lines lc black, '' u 4:2 t 'yA' w l lc black, '' u 4:3 t 'zA' w l lc black, '/tmp/$USER/dataB' using 4:1 t 'xB' with lines lc 'red', '' u 4:2 t 'yB' w l lc 'green', '' u 4:3 t 'zB' w l lc 'blue'
EOF
