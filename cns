#!/bin/sh
#
#  (c) 2018-2020 m4r35n357@gmail.com (Ian Smith), for licencing see the LICENCE file
#
#  Example: ./cns both ./tsm-thomas-dbg 15 10 0.1 30000 1 0 0 .19
#

echo "Clean Numerical Simulation: [$*]" >&2

method=$1
shift
original=$*

. ./cns-functions.sh

case $method in
    'step4') quarterstep $original;;
    'step8') eightthstep $original;;
    'order') orderplus2 $original;;
     'both') orderstep $original;;
    'both2') orderstep2 $original;;
    'nosim') ;;  # replot existing data
          *) echo "CNS: Bad Method"; exit 1;;
esac
case $method in
    'nosim') ;;
          *) $original >$fileB & wait;;
esac

./divergence $fileA $fileB 0.000000000001 0.000000001 0.000001 0.001 1.0

./plotDiff.py $fileA $fileB &
